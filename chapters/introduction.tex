
\فصل{مقدمه}

\قسمت{تعریف مسئله}

معماری میکروسرویس سبکی از معماری است که در آن یک برنامه‌ی کاربردی در قالب مجموعه‌ای از اجزا یا پودمان‌ها ساخته می‌شود. هر پودمان از یک کار یا هدف تجاری خاص پشتیبانی می‌کند و از یک واسط که به صورت کامل تعریف شده و ساده است مانند واسط برنامه نویسی کاربردی\پاورقی{Application Programming Interface (API)} برای برقراری ارتباط با دسته‌های دیگر از برنامه‌ها یا خدمات استفاده می‌کند\مرجع{buildingmicroservicesbook}.

در سال‌های اخیر، میکروسرویس‌ها محبوبیت بیشتری پیدا کرده‌اند و شرکت‌ها ترجیح می‌دهند از معماری یکپارچه به معماری میکروسرویس حرکت کنند. به طور معمول، ممکن است صدها تا هزاران میکروسرویس در سیستم‌های مبتنی بر معماری میکروسرویس در برنامه‌ها با مقیاس بزرگ گنجانده شوند. به عنوان مثال، بیش از 500 میکروسرویس نتفلیکس\پاورقی{Netflix} روزانه تقریباً 2 میلیارد درخواست واسط برنامه‌نویسی کاربردی را انجام می‌دهند. \مرجع{netflixsample2015}، در حالی که سیستم وی‌چت تنسنت\پاورقی{WeChat Tencent} از بیش از 3000 سرویس تشکیل شده است که بر روی بیش از 20000 ماشین اجرا می‌شود\مرجع{Zhou2018}. 

سبک معماری میکروسرویس از معماری خدمت‌گرا\پاورقی{Service Oriented Architecture (SOA)} پدید آمده است و تاکید آن نیز بر ایجاد خدمات ریزدانه‌، توسعه-عملیات\پاورقی{Development-Operations (DevOps)} و روش‌های چابک\پاورقی{Agile} است\مرجع{waseem2020}. 
دو سبک معماری میکروسرویس و معماری خدمت‌گرا، به طور قابل توجهی از نظر ویژگی‌های هر خدمت، مانند ارتباطات خدمات و به اشتراک گذاری مولفه\پاورقی{Component}ها متفاوت هستند؛ به عنوان مثال، معماری میکروسرویس می‌تواند شامل صدها سرویس ریزدانه باشد که با هم یک خدمت را ارائه می‌کنند، در حالی ‌که هر کدام از این میکروسرویس‌ها با سرعت زیاد تکامل می‌یابند. اما سبک معماری خدمت‌گرا شامل خدمات درشت‌دانه‌تر و پایدارتری است. در معماری میکروسرویس، ارتباط از طریق یک لایه واسط برنامه‌نویسی کاربردی برقرار می‌شود، در حالی که در معماری خدمت‌گرا می‌توان از طریق یک واسط برنامه‌نویسی کاربردی (API)  در کنار یک گذرگاه خدمات سازمانی\پاورقی{Enterprise Service Bus (ESB)} ارتباطات را برقرار کرد. در کل معماری میکروسرویس مقیاس‌پذیری، جداسازی و کنترل بهتری در فرآروند پیاده‌سازی برنامه (به عنوان مثال در مراحل توسعه، آزمون، استقرار) نسبت به معماری خدمت‌گرا ارائه می‌کند\مرجع{msavssoa2016}.
این تفاوت‌های اساسی چالش‌هایی را در آزمون راهبردهای خاص برنامه‌های مبتنی بر معماری میکروسرویس ایجاد می‌کند. هدف از ایجاد آزمون‌ها یافتن احتمال خطاهای پیاده‌سازی یا خطاهایی است که به کاهش کیفیت منجر می‌شوند و یا خطاهایی است که قابلیت استفاده یک برنامه یا سیستم را کاهش می‌دهند. 


آزمون نرم‌افزار از مجموعه تصدیق‌کننده‌های پویا تشکیل شده است که ارزیابی می‌کنند، آیا یک سیستم، رفتار مورد انتظار را در مجموعه‌ی محدودی از موارد آزمون (که به طور مناسب از دامنه‌ی اجرای معمولاً نامحدود انتخاب شده‌اند) ارائه می‌دهد یا خیر. پویا در این تعریف بر این حقیقت تاکید دارد که آزمون بر روی مجموعه‌ی متغیر از ورودی‌های انتخاب‌شده انجام می‌شود،‌ البته دقیق‌تر آن است که برخی اوقات حتی یک ورودی انتخاب‌شده نیز برای مشخص کردن یک آزمون کافی نیست و ممکن است برنامه‌های غیرقطعی و پیچیده به ازای یک ورودی یکسان با توجه به حالت درونیشان، رفتارهای متفاوتی در مقابل آزمون نشان دهند و پاسخ‌های متفاوتی بدهند؛ در نتیجه برای مشخص کردن یک آزمون علاوه بر ورودی به حالت درونی برنامه نیز نیاز است.\مرجع {SWEBOK2014} آزمون‌ها مجموعه‌ای از فعالیت‌ها هستند که هدفشان یافتن خطاهای احتمالی در طراحی، پیاده‌سازی، کیفیت یا قابلیت استفاده یک برنامه یا سیستم است. تعداد سرویس‌ها، فرآیندهای ارتباطی، وابستگی‌ها، نمونه‌ها، ارتباطات شبکه و سایر متغیرها بر روش‌های آزمون برنامه‌ها با معماری میکروسرویس تأثیر می‌گذارند. این نوع از برنامه‌ها به دلیل ماهیت پیچیده و رفتار پویای خود، چالش‌های مهمی را برای آزمون ایجاد می‌کنند. برای رسیدن به هدفی که گفته شد، در طول فرآروند آزمون، باید رفتارهای همزمان میکروسرویس‌های مختلف و تعاملات بین آنها درک شود\مرجع{Beschastnikh2016}. 

\قسمت{اهمیت موضوع}

تشخیص عیوب و اشکالات یک نرم‌افزار در مرحله طراحی، یک گام مهم در مهندسی نرم‌افزار است. اهمیت این فرآیند از این واقعیت ناشی می‌شود که به بالا رفتن کیفیت عملکرد نرم افزار کمک می‌کند و باعث اطمینان بیشتر و کارآمدتر شدن آن در خدمت به کاربران می‌شود. با تشخیص فعالانه نقص‌ها در مرحله طراحی، توسعه‌دهندگان می‌توانند از مشکلات بی‌شماری پایین‌دستی که در غیر این صورت پس از استقرار نرم‌افزار و استفاده توسط کاربران نهایی ایجاد می‌شوند، جلوگیری کنند. این فرآیند به‌ویژه در پروژه‌های مقیاس بزرگ، که در آن‌ها حتی اشکالات یا نقص‌های جزئی می‌تواند فاجعه‌بار باشد و منجر به خسارات مالی قابل‌توجه و آسیب به اعتبار سازمان شود، اهمیت دارد.

مزایای مالی تشخیص نقص در مرحله طراحی قابل توجه است و به ویژه برای پروژه‌های بزرگ جذاب است. با شناسایی و رفع خطاها در مراحل اولیه طراحی، سازمان‌ها می‌توانند خطرات ناشی از خطاها و تاخیرهای پرهزینه را به حداقل برسانند، در منابع با ارزش صرفه جویی کنند و کارایی کلی پروژه را بهبود بخشند. این رویکرد همچنین با اجازه دادن به مدیران پروژه برای برآورد نیازهای منابع و تخصیص موثرتر منابع، فرآیند توسعه را بهبود می‌بخشد. در مجموع، تشخیص عیوب و اشکالات در مرحله طراحی برای توسعه و استقرار موفق نرم‌افزار ضروری است و می‌تواند تأثیر قابل‌توجهی بر بازگشت سرمایه برای سازمان‌ها داشته باشد.

چالش‌هایی بر سر راه آزمون برنامه‌ها با معماری پیچیده و رفتار پویای میکروسرویس‌ها وجود دارد، در پژوهش‌های پیشین سعی شده است که برای چالش‌های ایجاد شده در این مسیر روش‌ها و رویکردهای جدیدی ارائه شود، در این روش‌ها تلاش شده است تا با وجود مولفه‌هایی که به طور مستقل از هم قابل استقرار هستند و در عین حال روابط پیچیده‌ای دارند، درستی عملکرد کلی سامانه سنجیده شود. یکی از رویکردهای آزمون معرفی شده رویکرد مدل‌رانه است، پژوهشگران در این رویکرد سعی کرده‌اند با روش‌های مدل‌سازی و ارائه‌ی توصیف صوری از میکروسرویس‌ها صحت عملکرد و نحوه تعامل میکروسرویس‌ها راصحت‌سنجی کنند، با وجود روش‌های پیشنهادی جدید، آزمون سامانه‌ها با معماری میکروسرویس در حوزه صنعت همچنان با چالش‌های زیادی روبه‌رو است\مرجع{waseem2020}. 


\قسمت{اهداف پژوهش}

هدف از پژوهش در این پایان‌نامه ارائه‌ی روشی مبتنی بر آزمون مدل-رانه برای آزمون برنامه‌ها و سیستم‌ها با معماری میکروسرویس بوده‌ است. روش آزمونی که در این پایان‌نامه ارائه شده، موارد آزمون را طبق یک معیار پوشش بر اساس منطق، به صورت خودکار استخراج می‌کند و همچنین با استفاده از یک ابزار آماده به کار برای تحلیل توصیفات صوری آن‌ها را در محیطی محدود بر روی توصیف صوری برنامه اجرا می‌کند.

برای این که بتوان موارد آزمون را بر اساس معماری برنامه به صورت خودکار، تولید کرد، ابتدا باید مدل‌های گردش کار برنامه که به زبان یاول\مرجع{yawlbook} تولید شده‌اند، به ابزاری که تولید کردیم، ورودی داده شوند. سپس این ابزار با پردازش آن‌ها، مدل‌های ورودی را با یک روش که توسعه داده‌شده‌ی روش پیشنهادی ریواده و همکاران است\مرجع{rivadeh2022}، به توصیفی صوری تبدیل می‌کند. توصیف صوری مدل‌ها، در قالب زبان الوی\مرجع{alloybook}  تولید می‌شوند. پس از ترجمه‌ی به زبان الوی موارد آزمون، از مکان‌هایی از برنامه که جریان کنترل برنامه را تعیین می‌کنند استخراج می‌شوند و سپس با استفاده از مسند\پاورقی{predicate}های موجود در آن‌ها موارد آزمون بر اساس پوشش گزاره‌ی فعال بند محدود\پاورقی{Restricted Active Clause Coverage (RACC)} تولید می‌‌شوند.

ترجمه‌ی مدل‌ها از یاول به الوی، به صورت خودکار، در ابزار موجود برای طراحی مدل‌های گردش کاری در یاول، انجام می‌شوند؛ دیگر نوآوری‌ای که ارائه شده است، انجام تحلیل‌هایی بر روی ساختار میکروسرویس‌ها با استفاده از ترجمه‌ی انجام‌شده است. این تحلیل‌ها برای شناسایی حالت‌های غیرمجاز و نامطلوب به کمک تحلیل‌گر برنامه می‌آیند. پس از انجام تحلیل، نتایج در ابزار نمایش داده می‌شوند.

علاوه بر این‌ها، تولید موارد آزمون نیز طبق روشی که ارائه داده‌ایم به صورت خودکار و با تولید همه‌ی مقادیر ممکن از روی مسندهای توصیف صوری و بر اساس معیار پوشش گزاره‌ی فعال محدود ایجاد می‌شوند و در همان ابزار گفته شده به آزمون‌کننده‌ نمایش داده می‌شوند. همچنین اجرای موارد آزمون تولید‌شده بر روی توصیف صوری و نمایش نتایج آزمون از نوآوری‌ها است.\newline\newline


\قسمت{ساختار پایان‌نامه}

ساختار پایان‌نامه در ادامه به شرح زیر است: فصل دوم شامل مفاهیم اولیه‌ای است که برای درک روش پیشنهادی و کارهای مرتبط با این پایان‌نامه نیاز هستند. در فصل سوم کارهای پیشین مرتبط با موضوع این پایان‌نامه را بررسی کردیم و سعی کردیم آن‌ها را بر اساس فراوانی موضوعات اصلی تحقیقی رایج در موضوعات پنج‌گانه دسته‌بندی کنیم. در فصل چهارم روش ارائه‌شده‌ی خود را شرح داده‌ایم. 

در فصل پنجم بر روی یک مورد مطالعاتی که برگرفته شده از یک برنامه‌ی واقعی است روش ارائه‌شده را اعمال کردیم و در هر مرحله نتایج به دست‌آمده را بیان کردیم .در بخش پایانی نیز به ارزیابی روش از نظر کارایی از نظر تحلیل جهش و همچنین از نظر کارایی زمانی پرداختیم. 





